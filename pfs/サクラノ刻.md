## 解包サクラノ刻 −櫻の森の下を歩む−

### 调试程序

开始调试程序 分析是这样对*.pfs进行读取的

文件读取主要使用3个API-CreateFile，SetFilePointer和ReadFile 分别对其下个断点

![image-20240808162657187](サクラノ刻.assets/image-20240808162657187.png)

读取0x1000数据并进行文件头判断

![image-20240808163251260](サクラノ刻.assets/image-20240808163251260.png)

181492指向数据偏移

71A4为文件数量

![image-20240808164344829](サクラノ刻.assets/image-20240808164344829.png)

对文件进行解密

![image-20240808164527895](サクラノ刻.assets/image-20240808164527895.png)

数据结构为

第一个DWORD为文件路径大小 

char[]文件名

倒数第三个DWORD全0 

倒数第二个DWORD 为文件数据偏移

倒数第一个DWORD 为文件数据大小